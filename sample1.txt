this is a synchronous way of writing the fileappending the data